%div
  #gear-item-list-container
    %form{:name => "gearForm", :novalidate => ""}
      %table
        %thead
          %tr
            %th{"ng-repeat" => 'heading in gearTableHeadings', "ng-click" => 'setGearTableOrder(heading)'}
              %span {{heading | titleCase}}
              %span{"class" => 'down-sort-triangle', "ng-show" => 'showGearTableSortIcon(heading, "forward")'}
              %span{"class" => 'up-sort-triangle', "ng-show" => 'showGearTableSortIcon(heading, "reverse")'}
            / %th{"ng-click" => 'setGearTableOrder("name")'}
            /   %span Name
            /   %span{"class" => 'down-sort-triangle', "ng-show" => 'showGearTableSortIcon("name", "forward")'}
            /   %span{"class" => 'up-sort-triangle', "ng-show" => 'showGearTableSortIcon("name", "reverse")'}
            / %th{"ng-click" => 'setGearTableOrder("description")'} Description
            / %th{"ng-click" => 'setGearTableOrder("location")'} Location
            / %th{"ng-click" => 'setGearTableOrder("weight")'} Weight
            / %th{"ng-click" => 'setGearTableOrder("status")'} Status
            %th Actions
        %tbody
          %tr{"ng-repeat" => 'gearItem in gearItems | orderBy:[gearTableOrder, "name"]', "ng-class" =>'gearItem.status', "ng-show" => 'gearItemVisible(gearItem)', "ng-form" => 'editGearItemForm'}
            %td
              %span{"ng-hide" => 'editingThisGearItem(gearItem)'} {{gearItem.name}}
              %span{"ng-show" => 'editingThisGearItem(gearItem)'}
                %input{:name => "name", "ng-model" => "gearItem.name", :placeholder => "item name (required)", :required => "", :type => "string"}
            %td
              %span{"ng-hide" => 'editingThisGearItem(gearItem)'} {{gearItem.description}}
              %span{"ng-show" => 'editingThisGearItem(gearItem)'}
                %input{:name => "description", "ng-model" => "gearItem.description", :placeholder => "item description", :type => "string"}
            %td
              %span{"ng-hide" => 'editingThisGearItem(gearItem)'} {{gearItem.location}}
              %span{"ng-show" => 'editingThisGearItem(gearItem)'}
                %input{:name => "location", "ng-model" => "gearItem.location", :placeholder => "item location", :type => "string"}
            %td{:align => 'right'}
              %span{"ng-hide" => 'editingThisGearItem(gearItem)'} {{gearItem.weight}}
              %span{"ng-show" => 'editingThisGearItem(gearItem)'}
                %input{:name => "weight", "ng-model" => "gearItem.weight", :placeholder => "item weight", :type => "text", :smart_float => ""}

            %td
              %span {{gearItem.status | prettyStatus}}
            %td
              %a{"ng-show" => "okToCheckOutItem(gearItem)", "ng-click" => 'checkOutGearItem(gearItem)', :href => "" } check out
              %a{"ng-show" => "okToCheckInItem(gearItem)", "ng-click" => "checkInGearItem(gearItem)", :href => "" } check in
              %a{"ng-show" => "okToDeleteGearItem(gearItem)", "ng-click" => 'removeGearItem(gearItem)', :href => "" } delete item
              %a{"ng-show" => 'okToEditGearItem(gearItem)', "ng-click" => 'editGearItem(gearItem)', :href => "" } edit item
              %a{"ng-show" => 'editingThisGearItem(gearItem)', "ng-click" => 'cancelEditGearItem()', :href => "" } cancel edit
              %button{"ng-show" => 'editingThisGearItem(gearItem)', "ng-disabled" => "editGearItemForm.$invalid", "ng-click" => 'updateGearItem(gearItem)', :href => "" } save item
              /%a{"ng-show" => 'editingThisGearItem(gearItem)', :href => "" } save item
          %tr#no-items{"ng-show" => 'gearItems.length == 0'}
            %td{:colspan => 6} No gear items yet.  Add some!
          %tr#new-item
            %td{:colspan => 6}
              %a{"ng-click" => "showGearForm()", "ng-hide" => "gearFormVisible", :href => ""} Add new item...
              %a{"ng-click" => "hideGearForm()", "ng-show" => "gearFormVisible", :href => ""} cancel
          %tr#gear_form_tr{"ng-show" => "gearFormVisible", "ng-form" => 'newGearItemForm'}
            %td
              %input{:name => "name", "ng-model" => "gearItem.name", :placeholder => "item name (required)", :required => "", :type => "string"}
            %td
              %input{:name => "description", "ng-model" => "gearItem.description", :placeholder => "item description", :type => "string"}
            %td
              %input{:name => "location", "ng-model" => "gearItem.location", :placeholder => "item location", :type => "string"}
            %td
              %input{:name => "weight", "ng-model" => "gearItem.weight", :placeholder => "item weight", :type => "text", :smart_float => ""}
            %td checked in
            %td
              %button{"ng-disabled" => "newGearItemForm.$invalid", "ng-click" => "addGearItem()", :type => "submit"} save item
    %p
      %a{"ng-show" => "onLoanItemsVisible", "ng-click" => "hideOnLoanItems()", :href => ""} Hide items on loan
      %a{"ng-hide" => "onLoanItemsVisible", "ng-click" => "showOnLoanItems()", :href => ""} Show items on loan

    %p
      %button{"ng-click" => "refreshGearItems()"} refresh gear items

%span{"class" => 'up-sort-triangle', "ng-show" => true}

%div
  #gear-item-list-container
    %form{:name => "gearForm", :novalidate => ""}
      %table
        %thead
          %tr
            %th{"ng-click" => 'setGearTableOrder("name")'} Name
            %th{"ng-click" => 'setGearTableOrder("description")'} Description
            %th{"ng-click" => 'setGearTableOrder("location")'} Location
            %th{"ng-click" => 'setGearTableOrder("weight")'} Weight
            %th{"ng-click" => 'setGearTableOrder("status")'} Status
            %th Actions
        %tbody
          %tr{"ng-repeat" => 'gearItem in gearItems | orderBy:gearTableOrder', "ng-class" =>'gearItem.status', "ng-show" => 'gearItemVisible(gearItem)'}
            %td {{gearItem.name}}
            %td {{gearItem.description}}
            %td {{gearItem.location}}
            %td {{gearItem.weight}}
            %td {{gearItem.status | prettyStatus}}
            %td
              %a{"ng-show" => "itemIsCheckedIn(gearItem)", "ng-click" => 'checkOutGearItem(gearItem)', :href => "" } check out
              %a{"ng-show" => "itemIsCheckedOut(gearItem)", "ng-click" => "checkInGearItem(gearItem)", :href => "" } check in
          %tr#new-item
            %td
              %a{"ng-click" => "showGearForm()", "ng-hide" => "gearFormVisible", :href => ""} Add new item...
              %a{"ng-click" => "hideGearForm()", "ng-show" => "gearFormVisible", :href => ""} cancel
            %td
            %td
            %td
            %td
            %td
          %tr#gear_form_tr{"ng-show" => "gearFormVisible"}
            %td
              %input{:name => "name", "ng-model" => "gearItem.name", :placeholder => "item name (required)", :required => "", :type => "string"}
            %td
              %input{:name => "description", "ng-model" => "gearItem.description", :placeholder => "item description", :type => "string"}
            %td
              %input{:name => "location", "ng-model" => "gearItem.location", :placeholder => "item location", :type => "string"}
            %td
              %input{:name => "weight", "ng-model" => "gearItem.weight", :placeholder => "item weight", :type => "text", :smart_float => ""}
            %td checked in
            %td
              %button{"ng-disabled" => "gearForm.$invalid", "ng-click" => "addGearItem()", :type => "submit"} save item
    %p
      %a{"ng-show" => "onLoanItemsVisible", "ng-click" => "hideOnLoanItems()", :href => ""} Hide items on loan
      %a{"ng-hide" => "onLoanItemsVisible", "ng-click" => "showOnLoanItems()", :href => ""} Show items on loan

    %p invalid? {{ gearForm.$invalid }}
    %p valid? {{ gearForm.$valid }}
    %p pristine? {{ gearForm.$pristine }}
    %p name pristine? {{ gearForm.name.$pristine }}
    %p gear form shown? {{ gearFormVisible }}
    %p
      %button{"ng-click" => "refreshGearItems()"} refresh gear items
